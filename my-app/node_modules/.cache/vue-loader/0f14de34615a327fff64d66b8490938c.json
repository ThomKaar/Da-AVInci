{"remainingRequest":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/src/components/edit/infoSections.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/src/components/edit/infoSections.vue","mtime":1603687449647},{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/users/kenak/documents/1CALPOLY/ART/Da-AVInci/my-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBJdGVtUHJvdmlkZXIsIENhdGVnb3J5UHJvdmlkZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgY29tcG9uZW50czogeyB9LA0KICAgIGRhdGE6IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdHlwZXM6IFsNCiAgICAgICAgICAgICAgICAiaWNvbiIsDQogICAgICAgICAgICAgICAgImltYWdlcyIsDQogICAgICAgICAgICAgICAgInNpbXBsZUxpbmsiLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGluZm86IFtdLA0KICAgICAgICAgICAgdGFnczogW10sDQogICAgICAgICAgICBzaG93OiAtMSwNCiAgICAgICAgICAgIG1heElkOiAwLA0KICAgICAgICB9DQogICAgfSwNCiAgICBhc3luYyBtb3VudGVkKCkgew0KICAgICAgICBsZXQgY2F0ZWdvcnlQcm92aWRlciA9IG5ldyBDYXRlZ29yeVByb3ZpZGVyKCk7DQogICAgICAgIGxldCBpdGVtUHJvdmlkZXIgPSBuZXcgSXRlbVByb3ZpZGVyKCk7DQoNCiAgICAgICAgYXdhaXQgaXRlbVByb3ZpZGVyLmdldEl0ZW1zQnlDb250ZW50KCJpbWFnZXMiKQ0KICAgICAgICAgICAgLnRoZW4oaXRlbXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEudGFncyA9IGl0ZW1zLm1hcChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGl0ZW0uaWQuTikgPiB0aGlzLiRkYXRhLm1heElkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGF0YS5tYXhJZCA9IHBhcnNlSW50KGl0ZW0uaWQuTikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwuUw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgY2F0ZWdvcnlQcm92aWRlci5nZXRDYXRlZ29yeUl0ZW1zKCkudGhlbihpbmZvID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGF0YS5pbmZvID0gaW5mbzsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNvbGxlY3Rpb25zOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRkYXRhLnRhZ3MNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICB0b2dnbGVTaG93OiBmdW5jdGlvbihjYXRfaW5kZXgpIHsNCiAgICAgICAgICAgIHRoaXMuJGRhdGEuc2hvdyA9ICh0aGlzLiRkYXRhLnNob3cgPT09IGNhdF9pbmRleCA/IC0xIDogY2F0X2luZGV4KQ0KICAgICAgICB9LA0KICAgICAgICBhZGRJdGVtOiBmdW5jdGlvbihzKSB7DQogICAgICAgICAgICAvLyBhZGQgbmV3IGVtcHR5IGl0ZW0gdG8gc2VjdGlvbg0KICAgICAgICAgICAgbGV0IG5ld0l0ZW0gPSB7DQogICAgICAgICAgICAgICAgdHlwZToge1M6ICJpY29uIn0sDQogICAgICAgICAgICAgICAgaWQ6IHtOOiAiVU5LTk9XTiJ9LA0KICAgICAgICAgICAgICAgIGV4dGVybmFsVXJsOiB7UzogIiJ9LA0KICAgICAgICAgICAgICAgIGljb246IHtTOiAiIn0sDQogICAgICAgICAgICAgICAgbGFiZWw6IHtTOiAiIn0sDQogICAgICAgICAgICAgICAgY29udGVudDoge1M6ICJpY29uIn0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0aGlzLiRkYXRhLmluZm9bc10uaXRlbXMucHVzaChuZXdJdGVtKTsNCiAgICAgICAgfSwNCiAgICAgICAgb25TZWxlY3RUeXBlOiBmdW5jdGlvbih0eXBlLCBpLCBqKSB7DQogICAgICAgICAgICAvLyBjaGFuZ2UgdHlwZSBvZiBpdGVtDQogICAgICAgICAgICBsZXQgY3Vyckl0ZW0gPSB0aGlzLiRkYXRhLmluZm9baV0uaXRlbXNbal07DQogICAgICAgICAgICBsZXQgbmV3SXRlbSA9IHsgDQogICAgICAgICAgICAgICAgdHlwZToge1M6IHR5cGV9LCANCiAgICAgICAgICAgICAgICBpZDoge046IGN1cnJJdGVtLmlkLk59LA0KICAgICAgICAgICAgICAgIGxhYmVsOiB7UzogIiJ9LA0KICAgICAgICAgICAgICAgIGV4dGVybmFsVXJsOiB7UzogIiJ9LA0KICAgICAgICAgICAgICAgIGljb246IHtTOiAiIn0sDQogICAgICAgICAgICAgICAgY29udGVudDoge1M6IHR5cGV9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2ltYWdlcycpIA0KICAgICAgICAgICAgICAgIG5ld0l0ZW0uaW1hZ2VJZHMgPSB7TDogW119Ow0KDQogICAgICAgICAgICB0aGlzLiRkYXRhLmluZm9baV0uaXRlbXMuc3BsaWNlKGosMSwgbmV3SXRlbSk7DQogICAgICAgIH0sDQogICAgICAgIHVwZGF0ZUl0ZW1zOiBmdW5jdGlvbihpKSB7DQogICAgICAgICAgICAvLyBzYXZlIGl0ZW0gY2hhbmdlcyBpbiBhIGdpdmVuIHNlY3Rpb24NCiAgICAgICAgICAgIGxldCBpdGVtUHJvdmlkZXIgPSBuZXcgSXRlbVByb3ZpZGVyKCk7DQogICAgICAgICAgICBsZXQgY2F0ZWdvcnlQcm92aWRlciA9IG5ldyBDYXRlZ29yeVByb3ZpZGVyKCk7DQoNCiAgICAgICAgICAgIGxldCBjYXRlZ29yeSA9IHsNCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRkYXRhLmluZm9baV0uY2F0ZWdvcnksDQogICAgICAgICAgICAgICAgaXRlbXM6IFtdDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuJGRhdGEuaW5mb1tpXS5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkLk4gPT09ICJVTktOT1dOIikgDQogICAgICAgICAgICAgICAgICAgIGl0ZW0uaWQuTiA9IGAke3RoaXMubmV3SWQoKX1gOw0KICAgICAgICAgICAgICAgIGNhdGVnb3J5Lml0ZW1zLnB1c2goaXRlbS5pZC5OKQ0KICAgICAgICAgICAgICAgIGl0ZW1Qcm92aWRlci51cGRhdGVJdGVtKGl0ZW0uaWQuTiwgaXRlbSk7DQogICAgICAgICAgICB9KTsgDQoNCiAgICAgICAgICAgIGNhdGVnb3J5UHJvdmlkZXIudXBkYXRlQ2F0ZWdvcnkoY2F0ZWdvcnkpOw0KICAgICAgICB9LA0KICAgICAgICBuZXdJZDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBjcmVhdGVzIG5ldyBpZA0KICAgICAgICAgICAgbGV0IG1heCA9IHRoaXMuJGRhdGEubWF4SWQ7DQogICAgICAgICAgICBmb3IgKGxldCBzZWN0aW9uIG9mIHRoaXMuJGRhdGEuaW5mbykgew0KICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBzZWN0aW9uLml0ZW1zKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChpdGVtLmlkLk4pID4gbWF4KSANCiAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IHBhcnNlSW50KGl0ZW0uaWQuTik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZUl0ZW06IGZ1bmN0aW9uKGksIGopIHsNCiAgICAgICAgICAgIC8vIHJlbW92ZSBpdGVtIGZyb20gc2VjdGlvbg0KICAgICAgICAgICAgdGhpcy4kZGF0YS5pbmZvW2ldLml0ZW1zLnNwbGljZShqLCAxKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsQ2hhbmdlczogZnVuY3Rpb24ocykgew0KICAgICAgICAgICAgdGhpcy4kZGF0YS5zaG93ID0gLTE7DQogICAgICAgICAgICBpZiAodGhpcy4kZGF0YS5pbmZvW3NdLmNhdGVnb3J5ID09PSAiIiANCiAgICAgICAgICAgICAgICB8fCB0aGlzLiRkYXRhLmluZm9bc10uaXRlbXMubGVuZ3RoID09PSAwKQ0KICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEuaW5mby5zcGxpY2UocywxKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRTZWN0aW9uOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIC8vIGNyZWF0ZXMgbmV3IGVtcHR5IHNlY3Rpb24NCiAgICAgICAgICAgIHRoaXMuJGRhdGEuaW5mby5wdXNoKHsNCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJycsDQogICAgICAgICAgICAgICAgaXRlbXM6IFtdLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLiRkYXRhLnNob3cgPSB0aGlzLiRkYXRhLmluZm8ubGVuZ3RoIC0xDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVNlY3Rpb246IGZ1bmN0aW9uKGkpIHsNCiAgICAgICAgICAgIC8vIGRlbGV0ZXMgYSBzZWN0aW9uDQogICAgICAgICAgICBsZXQgbXNnID0gYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgc2VjdGlvbiAke3RoaXMuJGRhdGEuaW5mb1tpXS5jYXRlZ29yeX0gYW5kICR7dGhpcy4kZGF0YS5pbmZvW2ldLml0ZW1zLmxlbmd0aH0gaXRlbXM/YA0KDQogICAgICAgICAgICBpZiAoIWNvbmZpcm0obXNnKSkNCiAgICAgICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgICAgIGxldCBjYXRlZ29yeVByb3ZpZGVyID0gIG5ldyBDYXRlZ29yeVByb3ZpZGVyKCk7DQogICAgICAgICAgICBsZXQgaXRlbVByb3ZpZGVyID0gbmV3IEl0ZW1Qcm92aWRlcigpOw0KDQogICAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSB0aGlzLiRkYXRhLmluZm9baV0uY2F0ZWdvcnk7DQogICAgICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLiRkYXRhLmluZm9baV0uaXRlbXM7DQogICAgICAgICAgICB0aGlzLiRkYXRhLmluZm8uc3BsaWNlKGksIDEpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjYXRlZ29yeVByb3ZpZGVyLmRlbGV0ZUNhdGVnb3J5KGNhdGVnb3J5KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBpZiggaXRlbS5pZC5OICE9PSAiVU5LTk9XTiIpIA0KICAgICAgICAgICAgICAgICAgICBpdGVtUHJvdmlkZXIuZGVsZXRlSXRlbShpdGVtLmlkLk4pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["infoSections.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"infoSections.vue","sourceRoot":"src/components/edit","sourcesContent":["<template>\r\n    <!--sections-->\r\n    <v-row>\r\n        <v-col \r\n        cols=\"12\" sm=\"3\" md=\"4\"\r\n        v-for=\"(section,s) of info\"\r\n        :key=\"'section' + s\"\r\n        >\r\n            <v-card flat\r\n            class=\"mx-auto mx-5\"\r\n            outlined \r\n            >\r\n                <!--section title - always showing-->\r\n                <v-card-title class=\"ma-2\">\r\n                    {{section.category}} ({{section.items.length}})\r\n                    <v-spacer />\r\n                    <!-- edit section button -->\r\n                    <v-btn icon\r\n                    @click=\"toggleShow(s)\"\r\n                    >\r\n                        <v-icon>\r\n                        {{ show === s ? 'mdi-close-circle-outline' : 'mdi-pencil-outline' }}\r\n                        </v-icon>\r\n                    </v-btn>\r\n                    <!-- delete section button -->\r\n                    <v-btn\r\n                    icon\r\n                    :disabled=\"show === s\"\r\n                    color=\"error\"\r\n                    @click=\"deleteSection(s)\"\r\n                    >\r\n                        <v-icon>mdi-delete</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n\r\n                <!--section sectiondont show during edit-->\r\n                <v-card-subtitle \r\n                v-show=\"show !== s\"\r\n                class=\"ma-2\"\r\n                >\r\n                    <div\r\n                    v-for=\"(item, i) of section.items\"\r\n                    :key=\"section.category + '-item' + i\"\r\n                    >\r\n                        <p>\r\n                            <v-icon small class=\"mb-1 mr-1\">\r\n                                {{item.icon.S}}\r\n                            </v-icon>\r\n                            {{item.label.S}}\r\n                        </p>\r\n                    </div>\r\n                </v-card-subtitle>\r\n\r\n                <!-- section edit - show only during edit -->\r\n                <v-expand-transition>\r\n                    <div v-show=\"show === s\">\r\n                        <v-divider />\r\n                        <v-flex class=\"pl-5 pr-5\">\r\n\r\n                            <!-- EDIT CATEGORY -->\r\n                            <h5 class=\"pt-5 pb-5\">EDIT CATEGORY NAME</h5>\r\n                            <v-text-field\r\n                            v-model=\"section.category\"\r\n                            label=\"Name\"\r\n                            />\r\n\r\n                            <v-divider />\r\n\r\n                            <!-- EDIT CATEGORY ITEMS -->\r\n                            <h5 class=\"pt-5 pb-5\">EDIT ITEMS</h5>\r\n                            <div\r\n                            v-for=\"(item, j) of section.items\"\r\n                            :key=j\r\n                            class=\"item mb-5\">\r\n\r\n                                <v-row>\r\n                                    <v-col >\r\n                                        <!-- item index -->\r\n                                        <h4 class=\"pt-1\">\r\n                                            {{\"ITEM NO.\" + j}}\r\n                                        </h4>\r\n                                    </v-col>\r\n                                    <v-col cols=\"1\">\r\n                                        <!-- delete item button -->\r\n                                        <v-btn \r\n                                        small icon\r\n                                        color=\"error\"\r\n                                        @click=\"deleteItem(s,j)\">\r\n                                            <v-icon >mdi-delete</v-icon> \r\n                                        </v-btn>\r\n                                    </v-col>\r\n                                </v-row>\r\n\r\n                                <!--select item type-->\r\n                                <v-select \r\n                                v-model=\"item.type.S\" \r\n                                :items=\"types\" \r\n                                label=\"Type\" \r\n                                @change=\"onSelectType(item.type.S, s, j)\" \r\n                                />\r\n                                \r\n                                <!--edit item if icon-->\r\n                                <div v-if=\"item.type.S === 'icon'\">\r\n\r\n                                    <v-text-field\r\n                                    v-model=\"item.label.S\"\r\n                                    label=\"Name\"\r\n                                    />\r\n                                    <v-text-field\r\n                                    v-model=\"item.externalUrl.S\"\r\n                                    label=\"Link\"\r\n                                    />\r\n                                    <v-text-field\r\n                                    class=\"mb-2\"\r\n                                    v-model=\"item.icon.S\"\r\n                                    label=\"icon\"\r\n                                    >\r\n                                        <template v-slot:append-outer>\r\n                                            <a \r\n                                            class=\"noDecorationLink\" \r\n                                            target=\"_blank\"\r\n                                            href=\"https://materialdesignicons.com/\">\r\n                                                <v-icon>\r\n                                                    mdi-help-circle-outline\r\n                                                </v-icon>\r\n                                            </a>\r\n                                        </template>\r\n                                    </v-text-field>\r\n                                </div>\r\n\r\n                                <!-- edit images item -->\r\n                                <div v-if=\"item.type.S === 'images'\"> \r\n                                    <v-select\r\n                                    :items=\"collections\"\r\n                                    v-model=\"item.label.S\"\r\n                                    label=\"Select a collection\"\r\n                                    no-data-text=\"No collections yet!\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <!-- edit link item -->\r\n                                <div v-if=\"item.type.S === 'simpleLink'\">\r\n                                    <v-text-field\r\n                                    v-model=\"item.label.S\"\r\n                                    label=\"Name\"\r\n                                    />\r\n                                    <v-text-field\r\n                                    v-model=\"item.externalUrl.S\"\r\n                                    label=\"URL\"\r\n                                    />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </v-flex>\r\n\r\n                        <!-- add new item button-->\r\n                        <v-btn \r\n                        text small\r\n                        class=\"ml-5 mb-10\" \r\n                        @click=\"addItem(s)\">\r\n                            <v-icon small class=\"mr-2\">mdi-plus</v-icon> \r\n                            Add Item\r\n                        </v-btn>\r\n                        <v-divider />\r\n        \r\n                        <v-card-actions class=\"ma-2\">\r\n                            <v-spacer />\r\n                            <!-- apply changes button-->\r\n                            <v-btn outlined\r\n                            color=\"success\" \r\n                            :disabled=\"section.category === ''\"\r\n                            @click=\"updateItems(s); show=-1\">\r\n                                Save\r\n                            </v-btn>\r\n                            <!-- cancel changes button-->\r\n                            <v-btn outlined\r\n                            color=\"error\"\r\n                            @click=\"cancelChanges(s)\">\r\n                                Cancel\r\n                            </v-btn> \r\n                        </v-card-actions>\r\n                    </div>\r\n                </v-expand-transition>\r\n            </v-card>\r\n        </v-col>\r\n    </v-row>\r\n</template>\r\n\r\n<script>\r\nimport { ItemProvider, CategoryProvider } from '../../providers';\r\n\r\nexport default {\r\n    components: { },\r\n    data: function() {\r\n        return {\r\n            types: [\r\n                \"icon\",\r\n                \"images\",\r\n                \"simpleLink\",\r\n            ],\r\n            info: [],\r\n            tags: [],\r\n            show: -1,\r\n            maxId: 0,\r\n        }\r\n    },\r\n    async mounted() {\r\n        let categoryProvider = new CategoryProvider();\r\n        let itemProvider = new ItemProvider();\r\n\r\n        await itemProvider.getItemsByContent(\"images\")\r\n            .then(items => {\r\n                this.$data.tags = items.map(item => {\r\n                    if (parseInt(item.id.N) > this.$data.maxId)\r\n                        this.$data.maxId = parseInt(item.id.N)\r\n                    return item.label.S\r\n                })\r\n                categoryProvider.getCategoryItems().then(info => {\r\n                    this.$data.info = info;\r\n                })\r\n            })\r\n    },\r\n    computed: {\r\n        collections: function() {\r\n            return this.$data.tags\r\n        }\r\n    },\r\n    methods: {\r\n        toggleShow: function(cat_index) {\r\n            this.$data.show = (this.$data.show === cat_index ? -1 : cat_index)\r\n        },\r\n        addItem: function(s) {\r\n            // add new empty item to section\r\n            let newItem = {\r\n                type: {S: \"icon\"},\r\n                id: {N: \"UNKNOWN\"},\r\n                externalUrl: {S: \"\"},\r\n                icon: {S: \"\"},\r\n                label: {S: \"\"},\r\n                content: {S: \"icon\"}\r\n            };\r\n            this.$data.info[s].items.push(newItem);\r\n        },\r\n        onSelectType: function(type, i, j) {\r\n            // change type of item\r\n            let currItem = this.$data.info[i].items[j];\r\n            let newItem = { \r\n                type: {S: type}, \r\n                id: {N: currItem.id.N},\r\n                label: {S: \"\"},\r\n                externalUrl: {S: \"\"},\r\n                icon: {S: \"\"},\r\n                content: {S: type}\r\n            };\r\n\r\n            if (type === 'images') \r\n                newItem.imageIds = {L: []};\r\n\r\n            this.$data.info[i].items.splice(j,1, newItem);\r\n        },\r\n        updateItems: function(i) {\r\n            // save item changes in a given section\r\n            let itemProvider = new ItemProvider();\r\n            let categoryProvider = new CategoryProvider();\r\n\r\n            let category = {\r\n                name: this.$data.info[i].category,\r\n                items: []\r\n            }\r\n\r\n            this.$data.info[i].items.forEach(item => {\r\n                if (item.id.N === \"UNKNOWN\") \r\n                    item.id.N = `${this.newId()}`;\r\n                category.items.push(item.id.N)\r\n                itemProvider.updateItem(item.id.N, item);\r\n            }); \r\n\r\n            categoryProvider.updateCategory(category);\r\n        },\r\n        newId: function() {\r\n            // creates new id\r\n            let max = this.$data.maxId;\r\n            for (let section of this.$data.info) {\r\n                for(let item of section.items) {\r\n                    if (parseInt(item.id.N) > max) \r\n                        max = parseInt(item.id.N);\r\n                }\r\n            }\r\n            return max + 1;\r\n        },\r\n        deleteItem: function(i, j) {\r\n            // remove item from section\r\n            this.$data.info[i].items.splice(j, 1);\r\n        },\r\n        cancelChanges: function(s) {\r\n            this.$data.show = -1;\r\n            if (this.$data.info[s].category === \"\" \r\n                || this.$data.info[s].items.length === 0)\r\n                this.$data.info.splice(s,1)\r\n        },\r\n        addSection: function() {\r\n            // creates new empty section\r\n            this.$data.info.push({\r\n                category: '',\r\n                items: [],\r\n            });\r\n            this.$data.show = this.$data.info.length -1\r\n        },\r\n        deleteSection: function(i) {\r\n            // deletes a section\r\n            let msg = `Are you sure you want to delete section ${this.$data.info[i].category} and ${this.$data.info[i].items.length} items?`\r\n\r\n            if (!confirm(msg))\r\n                return;\r\n\r\n            let categoryProvider =  new CategoryProvider();\r\n            let itemProvider = new ItemProvider();\r\n\r\n            let category = this.$data.info[i].category;\r\n            let items = this.$data.info[i].items;\r\n            this.$data.info.splice(i, 1);\r\n            \r\n            categoryProvider.deleteCategory(category);\r\n            \r\n            items.forEach(item => {\r\n                if( item.id.N !== \"UNKNOWN\") \r\n                    itemProvider.deleteItem(item.id.N);\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.noDo\r\n</style>\r\n\r\n"]}]}