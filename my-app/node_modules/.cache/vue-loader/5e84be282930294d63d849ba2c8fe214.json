{"remainingRequest":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/src/components/edit/ImageUploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/src/components/edit/ImageUploader.vue","mtime":1603690727434},{"path":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/users/kenak/documents/adult/repos/Da-AVInci/my-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IEZpbGVVcGxvYWQgZnJvbSAndi1maWxlLXVwbG9hZCc7CmltcG9ydCB7IEltYWdlUHJvdmlkZXIsIEl0ZW1Qcm92aWRlciB9IGZyb20gJy4uLy4uL3Byb3ZpZGVycyc7ClZ1ZS51c2UoRmlsZVVwbG9hZCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgIGZpbGVFeHRlbnNpb246ICIiLAogICAgICAgICAgZmlsZTogbnVsbCwKICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgIGlzRmlsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGRhdGEuZmlsZSBpbnN0YW5jZW9mIEZpbGUKICAgICAgfSwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIG9uRmlsZVVwZGF0ZTogZnVuY3Rpb24oZmlsZSkgewogICAgICAgIHRoaXMuJGRhdGEuZmlsZSA9IGZpbGU7CiAgICAgICAgdGhpcy4kZGF0YS50aXRsZSA9IGZpbGUubmFtZS5zcGxpdCgnLicpWzBdOwogICAgICAgIHRoaXMuJGRhdGEuZmlsZUV4dGVuc2lvbiA9IGZpbGUubmFtZS5zcGxpdCgnLicpWzFdOwogICAgICB9LAogICAgICBjbG9zZVVwbG9hZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLiRkYXRhLmRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kZGF0YS5maWxlID0gbnVsbDsKICAgICAgICAgIHRoaXMuJGRhdGEuZmlsZUV4dGVuc2lvbiA9ICIiCiAgICAgICAgICB0aGlzLiRkYXRhLnRpdGxlID0gIiIKICAgICAgfSwKICAgICAgdXBsb2FkRmlsZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIGVtaXQgZXZlbnQgdG8gcmVsb2FkIHRoZSBpbWFnZU9yZ2FuaXplciBvbmNlIHRoZSBpbWFnZSBpcyB1cGxvYWRlZAogICAgICAgIC8vIHNldCBsb2FkaW5nIHVudGlsIHRoZSB1cGxvYWQgaXMgZG9uZS4uLgogICAgICAgIAogICAgICAgIGxldCBmaWxlID0gdGhpcy4kZGF0YS5maWxlOwogICAgICAgIGxldCB0aXRsZSA9IHRoaXMuJGRhdGEudGl0bGU7CiAgICAgICAgbGV0IGNvbnRlbnRUeXBlID0gYGltYWdlLyR7dGhpcy4kZGF0YS5maWxlRXh0ZW5zaW9ufWA7CgogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAvLyBzYXZlIHRoaXMgZGF0YTExMTEgYW5kIHNlbmQgdG8gc2VydmVyCiAgICAgICAgICBsZXQgZGF0YTExMTEgPSBlLnRhcmdldC5yZXN1bHQgLy8gcmVhZGVyLnJlc3VsdCAvLyAtLS0tLS0tLS0tLS0tLS0tLSBkYXRhMTExMQogICAgICAgICAgY29uc3QgaW1hZ2VQcm92aWRlciA9IG5ldyBJbWFnZVByb3ZpZGVyKCk7CiAgICAgICAgICBsZXQgYm9keSA9IHsKICAgICAgICAgICAgZmlsZTogZGF0YTExMTEsCiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLAogICAgICAgICAgfTsKICAgICAgICAgIGltYWdlUHJvdmlkZXIudXBsb2FkSW1hZ2UoYm9keSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICBsZXQgaXRlbVByb3ZpZGVyID0gbmV3IEl0ZW1Qcm92aWRlcigpOwogICAgICAgICAgICBpdGVtUHJvdmlkZXIuY3JlYXRlSXRlbSh7CiAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgIHVybDogcmVzcG9uc2UuTG9jYXRpb24sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICB9OwogICAgICAgIHRoaXMuY2xvc2VVcGxvYWQoKQogICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZSk7CiAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["ImageUploader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImageUploader.vue","sourceRoot":"src/components/edit","sourcesContent":["<template>\n  <v-row justify=\"end\" class='ma-2'>\n    <v-dialog\n    v-model=\"dialog\"\n    persistent\n    max-width=\"600px\"\n    >\n      <template \n      v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n          outlined\n          v-bind=\"attrs\"\n          v-on=\"on\"\n          >\n          <v-icon small class=\"mr-2\">mdi-upload</v-icon>\n          Upload New Image\n          </v-btn>\n      </template>\n\n      <v-card \n      flat\n      class=\"mx-auto\"\n      outlined \n      >\n        <v-card-title> Upload Image</v-card-title>\n\n        <form class=\"form my-5 mx-10\"> \n          <v-file-input\n            accept=\"image/*\"\n            label=\"Choose Image File\"\n            prepend-icon=\"mdi-file-image\"\n            :value=\"file\"\n            @change=\"onFileUpdate\"\n          />\n          <v-text-field\n            v-model=\"title\"\n            prepend-icon=\"mdi-pencil-outline\"\n            label=\"Image Name\"\n          />\n        </form>\n\n        <v-card-actions class='my-2 mx-5'>\n          <v-spacer />\n          <v-btn \n          outlined\n          color=\"success\"\n          type=\"submit\"\n          :disabled=\"!isFile\"\n          @click.prevent=\"uploadFiles\"\n          >\n            Upload\n          </v-btn>\n          <v-btn\n          color=\"error\"\n          outlined\n          @click=\"closeUpload\"\n          >\n            Cancel\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n\n<script>\nimport Vue from 'vue';\nimport FileUpload from 'v-file-upload';\nimport { ImageProvider, ItemProvider } from '../../providers';\nVue.use(FileUpload);\n\nexport default {\n    data: function() {\n        return {\n          dialog: false,\n          title: \"\",\n          fileExtension: \"\",\n          file: null,\n        };\n    },\n    computed: {\n      isFile: function() {\n        return this.$data.file instanceof File\n      },\n    },\n    methods: {\n      onFileUpdate: function(file) {\n        this.$data.file = file;\n        this.$data.title = file.name.split('.')[0];\n        this.$data.fileExtension = file.name.split('.')[1];\n      },\n      closeUpload: function() {\n          this.$data.dialog = false;\n          this.$data.file = null;\n          this.$data.fileExtension = \"\"\n          this.$data.title = \"\"\n      },\n      uploadFiles: function() {\n        // emit event to reload the imageOrganizer once the image is uploaded\n        // set loading until the upload is done...\n        \n        let file = this.$data.file;\n        let title = this.$data.title;\n        let contentType = `image/${this.$data.fileExtension}`;\n\n        var reader = new FileReader();\n        reader.onloadend = function(e) {\n          // save this data1111 and send to server\n          let data1111 = e.target.result // reader.result // ----------------- data1111\n          const imageProvider = new ImageProvider();\n          let body = {\n            file: data1111,\n            title: title,\n            contentType: contentType,\n          };\n          imageProvider.uploadImage(body).then(function(response) {\n            let itemProvider = new ItemProvider();\n            itemProvider.createItem({\n              title: title,\n              url: response.Location,\n            });\n          })\n        };\n        this.closeUpload()\n        reader.readAsBinaryString(file);\n      }\n    }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}